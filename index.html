<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Click Per Second</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        body {
            font-family: Arial, sans-serif;
            background: #0f172a;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        .app {
            background: #020617;
            padding: 30px;
            border-radius: 12px;
            width: 320px;
            text-align: center;
        }

        .modes button {
            width: 30%;
            padding: 10px;
            margin: 5px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            background: #334155;
            color: white;
        }

        .modes button.active {
            background: #38bdf8;
            color: black;
        }

        button {
            width: 100%;
            padding: 20px;
            font-size: 20px;
            margin-top: 15px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }

        #clickBtn {
            background: #22c55e;
            color: black;
        }

        #resetBtn {
            background: #475569;
            color: white;
        }

        .stats {
            margin-top: 10px;
            font-size: 18px;
        }
    </style>
</head>
<body>

<div class="app">
    <h1>Test CPS</h1>

    <div class="modes">
        <button data-time="1">1s</button>
        <button data-time="5" class="active">5s</button>
        <button data-time="10">10s</button>
    </div>

    <div class="stats">Temps : <span id="time">5.0</span>s</div>
    <div class="stats">Clicks : <span id="clicks">0</span></div>
    <div class="stats">CPS : <span id="cps">0</span></div>

    <button id="clickBtn">CLIQUER</button>
    <button id="resetBtn">Reset</button>
</div>

<script>
    let duration = 5;
    let timeLeft = duration;
    let clicks = 0;
    let timer = null;
    let started = false;

    const timeEl = document.getElementById("time");
    const clicksEl = document.getElementById("clicks");
    const cpsEl = document.getElementById("cps");
    const clickBtn = document.getElementById("clickBtn");
    const resetBtn = document.getElementById("resetBtn");
    const modeBtns = document.querySelectorAll(".modes button");

    modeBtns.forEach(btn => {
        btn.addEventListener("click", () => {
            if (started) return;

            modeBtns.forEach(b => b.classList.remove("active"));
            btn.classList.add("active");

            duration = parseInt(btn.dataset.time);
            resetTest();
        });
    });

    clickBtn.addEventListener("click", () => {
        if (!started) startTest();
        clicks++;
        clicksEl.textContent = clicks;
    });

    resetBtn.addEventListener("click", resetTest);

    function startTest() {
        started = true;
        timer = setInterval(() => {
            timeLeft -= 0.1;
            timeEl.textContent = timeLeft.toFixed(1);

            if (timeLeft <= 0) endTest();
        }, 100);
    }

    function endTest() {
        clearInterval(timer);
        clickBtn.disabled = true;
        cpsEl.textContent = (clicks / duration).toFixed(2);
    }

    function resetTest() {
        clearInterval(timer);
        clicks = 0;
        timeLeft = duration;
        started = false;
        clickBtn.disabled = false;

        clicksEl.textContent = "0";
        cpsEl.textContent = "0";
        timeEl.textContent = duration.toFixed(1);
    }
</script>

</body>
</html>
